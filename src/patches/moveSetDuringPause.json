{
  "description": "Writes a letter during pause",
  "subroutineSpace": {
    "start": "97000",
    "end": "bfff0"
  },
  "symbols": {
    "MOVEM_STORAGE": "10f500",
    "WROTE_A_MOVESET": "10f600"
  },
  "patches": [
    {
      "type": "prom",
      "description": "terry's moves",
      "subroutine": true,
      "symbol": "TERRY",
      "patchAsm": "terry.asm"
    },
    {
      "type": "prom",
      "description": "write moveset routine",
      "subroutine": true,
      "symbol": "WRITE_MOVESET",
      "patchAsm": "writeMoveset.asm"
    },
    {
      "type": "prom",
      "description": "clear moveset routine",
      "subroutine": true,
      "symbol": "CLEAR_MOVESET",
      "patchAsm": "clearMoveset.asm"
    },
    {
      "type": "prom",
      "description": "write moveset hook",
      "address": "105f16",
      "subroutine": true,
      "symbol": "WRITE_MOVESET_HOOK",
      "patchAsm": [
        ";; restore what was clobbered",
        "move.l D0, $3c0000",
        "tst.b $108786",
        "beq clear",
        ";; game is paused",
        "jsr $2WRITE_MOVESET",
        "move.b #1, $WROTE_A_MOVESET",
        "bra done",
        "clear:",
        ";; game is not paused",
        "cmpi.b #1, $WROTE_A_MOVESET",
        "bne done",
        "jsr $2CLEAR_MOVESET",
        "move.b #0, $WROTE_A_MOVESET",
        "done:",
        "rts"
      ]
    }
  ]
}
